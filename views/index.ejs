<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title><%= title %></title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel=stylesheet href=https://cdn.jsdelivr.net/npm/pretty-print-json@2.0/dist/css/pretty-print-json.css>
</head>
<body class='bg-info-subtle'>

<div class='bg-white rounded-1 shadow p-4 my-4 mx-auto' style='width: 720px !important;'>
  <h1 class='text-primary fw-semibold'><%= title %></h1>
  <p>This tool generates some of the JSON resources needed to make a First-Party Set submission (<a href='https://github.com/GoogleChrome/first-party-sets/blob/main/FPS-Submission_Guidelines.md' target='_blank'>see full guidelines</a>)</p>
  <p>Enter the details of your First-Party Set below:</p>
  <form id="myForm" action="/" method="post">
    <!-- Contact Email -->
    <div class="mb-3">
      <label for="contact" class="form-label">Contact</label>
      <input type="email" class="form-control form-control-sm" name='contact' id="contact">
      <div class="form-text">Email address or group alias if available.</div>
    </div>
    <!-- Set Primary -->
    <div class="mb-3">
      <label for="primary" class="form-label">Set Primary</label>
      <input type="url" class="form-control form-control-sm" name='primary' id="primary" required>
      <div class='form-text'>https://primary1.com</div>
    </div>
    <!-- Associated Subset -->
    <div class="mb-3 p-2" style='border: 1px dashed gray;'>
      <div class='d-flex justify-content-between'>
        <p class='fw-semibold fs-5'>Associated Subset</p>
        <div>
          <button id='removeAssociate' type='button' class='btn btn-sm btn-outline-danger'>Remove (-)</button>
          <button id='addAssociate' type='button' class='btn btn-sm btn-outline-primary'>Add (+)</button>
        </div>
      </div>
      <div id='associatedDomains'></div>
    </div>
    <!-- Service Subset -->
    <div class="mb-3 p-2" style='border: 1px dashed gray;'>
      <div class='d-flex justify-content-between'>
        <p class='fw-semibold fs-5'>Service Subset</p>
        <div>
          <button id='removeService' type='button' class='btn btn-sm btn-outline-danger'>Remove (-)</button>
          <button id='addService' type='button' class='btn btn-sm btn-outline-primary'>Add (+)</button>
        </div>
      </div>
      <div id='serviceDomains'></div>
    </div>
    <!-- ccTLDs -->
    <div class="mb-3 p-2" style='border: 1px dashed gray;'>
      <div class='d-flex justify-content-between'>
        <p class='fw-semibold fs-5'>Contry Code Top-level Domains (ccTLDs)</p>
        <div>
          <button id='removeCountry' type='button' class='btn btn-sm btn-outline-danger'>Remove (-)</button>
          <button id='addCountry' type='button' class='btn btn-sm btn-outline-primary'>Add (+)</button>
        </div>
      </div>
      <div id='countryDomains'></div>
    </div>
    <!-- Form Submit -->
    <div>
      <button type='submit' class='btn btn-success w-100'>
        Generate FPS Submission Resources
        <div id='loadingSpinner' class="spinner-border spinner-border-sm" role="status" style='display: none;'>
          <span class="visually-hidden">Loading...</span>
        </div>
      </button>
    </div>
  </form>
  <div id='outputWrapper' class='border-top border-2 mt-4' style='display: none;'>
    <h4 class='my-4'>Your FPS Submission</h4>
    <p>Add the <code>.well-known</code> file to the <b>primary domain</b> with the following content:</p>
    <ul>
      <li id='primaryOutput' class='font-monospace'></li>
    </ul>
    <pre id='primaryWellKnownOutput' style="background-color: ghostwhite;" class='border rounded p-3'><code></code></pre>
    <hr>
    <p>Add the <code>.well-known</code> file to <b>all the other domains</b> in your set with the following content:</p>
    <div id='domainsListOutput'></div>
    <pre id='membersWellKnownOutput' style="background-color: ghostwhite;" class='border rounded p-3'><code></code></pre>
    <hr>
    <p>Submit a GitHub PR with your First-Party Set to the <a href='https://github.com/GoogleChrome/first-party-sets/blob/main/first_party_sets.JSON' target='_blank'>canonical list</a> by adding the content below as a new item to the "sets" list.</p>
    <pre id='submissionOutput' style="background-color: ghostwhite;" class='border rounded p-3'><code></code></pre>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
<script src=https://cdn.jsdelivr.net/npm/pretty-print-json@2.0/dist/pretty-print-json.min.js></script>
<script src='/javascripts/main.js'></script>
</body>
</html>
